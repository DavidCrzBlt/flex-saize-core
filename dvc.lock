schema: '2.0'
stages:
  preprocess:
    cmd: python scripts/run_preprocess.py --input-path data/data.csv 
      --output-path data/data_clean.csv --output-path-transformers 
      data/temp_transformers/
    deps:
    - path: data/data.csv
      hash: md5
      md5: a0179f890fee5507ca5fdb95c90ef878
      size: 86516
    - path: scripts/run_preprocess.py
      hash: md5
      md5: 602799b08271de1ad628a58f7ead9555
      size: 4154
    - path: src/flexsaize/data/preprocessor.py
      hash: md5
      md5: 366419147abb9f0d4a9e506e2e9978cf
      size: 11065
    outs:
    - path: data/data_clean.csv
      hash: md5
      md5: 29903640b1a11d97d1e2872ec864dbb1
      size: 176052
    - path: data/temp_transformers/
      hash: md5
      md5: e10c40c2ed972a5d419e9f1214e43384.dir
      size: 2175
      nfiles: 3
  split:
    cmd: python scripts/run_split.py --input-path-clean data/data_clean.csv 
      --output-path-train data/train.csv --output-path-val data/val.csv 
      --output-path-test data/test.csv --group-column file --test-size 0.1 
      --val-size 0.1
    deps:
    - path: data/data_clean.csv
      hash: md5
      md5: 29903640b1a11d97d1e2872ec864dbb1
      size: 176052
    - path: scripts/run_split.py
      hash: md5
      md5: 56c232f53673032b693eaba1537befb1
      size: 2760
    outs:
    - path: data/test.csv
      hash: md5
      md5: 1d84bc2bb54e37cb5f203724f03ed348
      size: 18376
    - path: data/train.csv
      hash: md5
      md5: 613190868c420e004428876b21a4136f
      size: 124633
    - path: data/val.csv
      hash: md5
      md5: 187639cc08a15465f73a558acd3b9018
      size: 15157
  train:
    cmd: "python scripts/run_train.py --input-path-train data/train.csv --input-path-val
      data/val.csv --input-path-test data/test.csv --target-col x,y,width,height --model-type
      StackingModel\n"
    deps:
    - path: data/test.csv
      hash: md5
      md5: 1d84bc2bb54e37cb5f203724f03ed348
      size: 18376
    - path: data/train.csv
      hash: md5
      md5: 613190868c420e004428876b21a4136f
      size: 124633
    - path: data/val.csv
      hash: md5
      md5: 187639cc08a15465f73a558acd3b9018
      size: 15157
    - path: scripts/run_train.py
      hash: md5
      md5: 4e3f85d6086897916ff31a61b175d355
      size: 4632
    - path: src/flexsaize/models/model_config.py
      hash: md5
      md5: 4234bf592bdb8a7c3119daf1a04d94dc
      size: 1137
    - path: src/flexsaize/train/model_trainer.py
      hash: md5
      md5: 8e315456febf8821e4b72e51752ad271
      size: 11565
    params:
      params.yaml:
        train.active_hyperparams:
          RandomForest:
            n_estimators: 300
            max_depth: 15
            random_state: 42
          XGBoost:
            n_estimators: 400
            learning_rate: 0.05
            max_depth: 10
          SVR:
            C: 1.0
          StackingModel:
            base_models:
              rf:
                model: RandomForest
                params:
                  n_estimators: 200
              xgb:
                model: XGBoost
                params:
                  n_estimators: 300
              svr:
                model: SVR
                params:
                  C: 1.0
            final_model:
              model: XGBoost
              params:
                n_estimators: 200
                n_jobs: -1
          HGB Regressor:
            learning_rate: 0.1
            max_depth: 10
          LightGBM:
            learning_rate: 0.05
            max_depth: 10
            n_estimators: 400
            random_state: 42
        train.model_type: StackingModel
    outs:
    - path: models/
      hash: md5
      md5: 5162dc880bb1deeb9d5814253bba2353.dir
      size: 29840421
      nfiles: 1
